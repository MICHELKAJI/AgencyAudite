<div 
  class="fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 md:p-8" 
  *ngIf="isVisible" 
  [@backdropFade]
>
  <!-- BACKDROP -->
  <div 
    class="fixed inset-0 bg-gradient-to-br from-slate-900/90 via-slate-800/90 to-slate-700/90 backdrop-blur-sm transition-opacity duration-300"
    (click)="closeModal()">
  </div>

  <!-- MODAL CONTAINER -->
  <div 
    class="relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl transform transition-all duration-300 ease-out"
    [@modalFade]="isVisible ? 'in' : 'out'"
    (click)="$event.stopPropagation()"
  >
    <!-- Bouton fermeture -->
    <button 
      (click)="closeModal()" 
      class="absolute top-4 right-4 p-2 bg-green-600 rounded-full text-white hover:text-black hover:bg-slate-100 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500"
      aria-label="Fermer">
      <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- FORMULAIRE -->
    <form 
      (ngSubmit)="sendEmail()" 
      #contactForm="ngForm" 
      class="relative w-full bg-white rounded-2xl p-6 sm:p-8 md:p-10 overflow-hidden"
    >
      <!-- Effets décoratifs -->
      <div class="absolute -top-10 -right-10 w-40 h-40 bg-green-100 rounded-full opacity-20"></div>
      <div class="absolute -bottom-10 -left-10 w-60 h-60 bg-blue-100 rounded-full opacity-20"></div>
      
      <h2 class="text-2xl md:text-3xl font-bold text-center mb-6">Contactez-nous</h2>
      
      <!-- Champ NOM -->
      <div class="mb-4">
        <label class="block text-gray-700 font-medium mb-2">Nom</label>
        <input 
          type="text" 
          name="name" 
          [(ngModel)]="formData.name" 
          required
          class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200" 
          placeholder="Votre nom"
        >
      </div>

      <!-- Champ EMAIL -->
      <div class="mb-4">
        <label class="block text-gray-700 font-medium mb-2">Email</label>
        <input 
          type="email" 
          name="email" 
          [(ngModel)]="formData.email" 
          required
          class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"
          placeholder="votre@email.com"
        >
      </div>

      <!-- Champ TÉLÉPHONE -->
      <div class="mb-4">
        <label class="block text-gray-700 font-medium mb-2">Téléphone</label>
        <input 
          type="tel" 
          name="phone" 
          [(ngModel)]="formData.phone"
          class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"
          placeholder="Votre numéro de téléphone"
        >
      </div>

      <!-- Champ MESSAGE -->
      <div class="mb-6">
        <label class="block text-gray-700 font-medium mb-2">Message</label>
        <textarea 
          name="message" 
          [(ngModel)]="formData.message" 
          required 
          rows="5"
          class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 resize-none"
          placeholder="Dites-nous comment nous pouvons vous aider..."
        ></textarea>
      </div>

      <!-- BOUTONS RESPONSIVES -->
      <div class="flex flex-col sm:flex-row gap-4 sm:gap-6 justify-center">
        <!-- Bouton envoyer -->
        <button 
          type="submit"
          class="w-full sm:w-auto relative overflow-hidden bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold px-8 py-3 rounded-xl shadow-lg hover:shadow-green-200 transition-all duration-300 transform hover:-translate-y-0.5"
        >
          <span class="relative z-10">Envoyer le message</span>
        </button>

        <!-- Bouton Google Sheet -->
        <button 
          type="button"
          (click)="goToGoogleSheet()"
          class="w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-semibold px-8 py-3 rounded-xl shadow-lg transition-all duration-300"
        >
          Google Sheet
        </button>
      </div>
    </form>
  </div>
</div>
